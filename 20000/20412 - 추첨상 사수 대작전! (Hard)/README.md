# 20412. [추첨상 사수 대작전! (Hard)](https://www.acmicpc.net/problem/20412)

| 티어                                                                  | 시간 제한 | 메모리 제한 | 제출 | 정답 | 맞힌 사람 | 정답 비율 |
| --------------------------------------------------------------------- | --------- | ----------- | ---: | ---: | --------: | --------: |
| <img src="https://static.solved.ac/tier_small/14.svg" width="20px" /> | 1 초      | 512 MB      | 1067 |  426 |       346 |   41.990% |

---

## 문제

**입력 제한 외 난이도에 따른 문제의 차이는 없다.** APC는 매년 교내 참가자들에게 추첨상을 지급하고 있다. 올해 추첨상은 공정한 추첨을 위해 준표가 직접 작성한 난수생성기를 통해 추첨을 하고자 한다.
난수생성기
란, 이론적으로 예측을 더 할 수 없도록 일련의 숫자나 심볼을 생성하는 장치이다.

주헌 : 형이 짠 난수생성기가 공정하다는 걸 어떻게 알아 ?

준표 : 걱정 마! c언어에서 ANSI 표준으로 사용하는 '선형합동법(Linear Congruential)' 을 구현할 거니까 ~

주헌 : 선형합동법이 뭔데 ?

준표 : 그게 뭐냐면 ..

준표의 설명을 간단히 정리해보면, **X 1 = (a × Seed + c) % m** **X 2 = (a × X 1 + c) % m** ... **X n + 1 = (a × X n + c) % m** 이런 식으로 준표가 몰래 정하는 _a_ , _c_ , _m_ 와 참가자들이 정하는 _Seed_ 값을 바탕으로 위 공식에 따라 난수를 생성한다는 것이었다.

주헌 : 음... _a_ , _c_ , _m_ 을 아무렇게나 잡으면 안 되지 않을까 ?

준표 : 응. Hull-Dobell 정리에 따르면 그게 맞아. 그런데 귀찮아서 그냥 _m을_ 대충 내가 좋아하는 소수로 하려구.

주헌 : (형이 좋아하는 소수..? 씨익..)

사실 주헌이는 올해에는 추첨상을 반드시 받아내겠다는 야망이 있었다! 위 대화는 그를 위한 초석이었던 것이다! 주헌이는 준표를 너무 잘 알기 때문에 준표가 좋아하는 소수를 이미 알고 있었고, 준표가 자신이 직접 작성한 난수생성기에 문제가 없음을 참가자들에게 알려주기 위해 실제 추첨 전 난수생성기가 잘 작동한다는 것을 모두의 앞에서 시연하기로 되어있었다.

주헌이는 계략을 짰다. 주헌이는 시연 중 참가자들이 정한 _Seed_ 와 이를 이용해 만들어진 _X 1_ , _X 2_ 를 이용해 준표가 몰래 정한 _a_ , _c_ 를 찾아낼 것이다. 만약 주헌이가 추첨상을 받지 못한다면, 찾아낸 _a_ , _c_ 를 폭로해 모든 것이 조작되었다고 주장하며 추첨 자체를 무효로 만들 계략이다! 주헌이는 _a_ , _c_ 를 자동으로 찾아주는 프로그램을 만들고자 한다.

## 입력

한 줄에 걸쳐 준표가 좋아하는 소수 _m_ , 참가자들이 정한 Seed, 시연으로 공개된 _X 1_ , _X 2_ 이 주어진다. 항상 가능한 상황만 입력으로 주어진다.

## 출력

준표가 비밀리에 선정한 정수 _a_ , _c_ 를 출력한다. 가능한 답이 여러 개라면, 그중 아무거나 출력한다.

## 제한

_m_ ≤ 1000,000,000 ( _m_ 은 소수)

0 < _Seed_ , _X 1_ , _X 2_ < _m_ 0 ≤ _a_ , _c_ < _m_

## 예제

### 예제 입력 1

```
13 5 2 9
```

### 예제 출력 1

```
2 5
```

## 예제

### 예제 입력 2

```
13 6 5 3
```

### 예제 출력 2

```
2 6
```

## 예제

### 예제 입력 3

```
11 9 9 9
```

### 예제 출력 3

```
2 2
```

## 노트

c언어에서의 rand() 함수는 위와 비슷하지만 _X n_ 의 상위 16개 비트를 반환하도록 구현되어있다.

## 출처

University
\>
아주대학교
\>
2020 아주대학교 프로그래밍 경시대회 APC
\>
Div.1
A3번
University
\>
아주대학교
\>
2020 아주대학교 프로그래밍 경시대회 APC
\>
Div.2
A3번

- 문제를 검수한 사람: edenooo , jwvg0425 , kyo20111 , xtalxlr
- 문제를 만든 사람: hjhj97 , spectaclehong

## 알고리즘 분류

- 수학
- 정수론
- 모듈로 곱셈 역원
- 페르마의 소정리
